<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>动画</title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			canvas{
				border: 1px solid red;
				position: relative;
				margin: 50px;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="1000px" height="800px"></canvas>
	</body>
	<script type="text/javascript">
		var canvas=document.getElementById('canvas');
		var ctx=canvas.getContext('2d');
		var rectX=0, rectY=0, dirX=1, dirY=1, speed=10;
		isMouseEnterRect=false;
		canvas.onmouseover=function(e){
			var mouseX = e.offsetX;
			var mouseY = e.offsetY;
			if(rectX<mouseX && mouseX<rectX+50&&rectY<mouseY&&mouseY<rectY+50){
				isMouseEnterRect=true;
			}else{
				isMouseEnterRect=false;
			}
		}
		var timer = setInterval(function(){
			if(!isMouseEnterRect){
				rectX+=speed*dirX;
				rectY+=speed*dirY;
				ctx.clearRect(0,0,canvas.width,canvas.height);
				ctx.fillRect(rectX,rectY,50,50);
				if(rectX+50>=canvas.width){
					dirX=-1;
				}else if(rectX<=0){
					dirX=1;
				}
				if(rectY+50>=canvas.height){
					dirY=-1;
				}else if(rectY<=0){
					dirY=1;
				}
			}
		},100)
	</script>
</html>
